University: [ITMO University](https://itmo.ru/ru/)
Faculty: [FICT](https://fict.itmo.ru)
Course: [Network programming](https://github.com/itmo-ict-faculty/network-programming)
Year: 2022/2023
Group: K34202
Author: Malyshev Alexey Andreevich
Lab: Lab1
Date of create: 29.10.2022
Date of finished: 05.11.2022

---
## I - установка
Получена виртуальная машина:
`network-programming-3 84.201.175.22 (Алексей М. Ксения А.)`
И приватный ключ (здесь не перечисляется в целях безопасности).

Подключение осуществленно по средствам ssh. 
> Заметка: при создании ключа из простого текстового файла ничего не получалось.
необходимо сгенерировать любой приватный ключ и заменить его на выданый

![Рисунок1]()
Установил на машину `pip v22.3`.
![Рисунок2]()
Ansible, тоже.
![Рисунок3]()
Было решено выбрать **OpenVPN сервер** и настраивать его через графический интерфейс. 
> Заметка: не получилось установить openvpn с граф. интерфейсом на убунту 22 версии, поэтому она машина переустановлена на 20 версию.

Перед началом работы обновлены все зависимости. Далее добавлена библиотека openvpn-as, чтобы получить доступ к графическому интерфейсу OVPN'а. Загружены все зависимости и запущен графический интерфейс, для OVPN.
![Рисунок4]()

Далее через VirtualBox установлен `Mikrotik CHR`. При первом входе стоит пользователь admin без пароля, пароль изменен.
![Рисунок5]()
Далее настроен графический интерфейс для Mikrotik'a через `winbox`. Сначала я проверил, активирована ли лицензия, затем в VirtualBox сменил адаптер сети для виртуальной машине на сетевой мост (чтобы Mikrotik был в зоне видимости), посмотрел ip Mikrotik'а, затем уже подключился к машине через winbox.
![Рисунок6]()
> Заметка: стоит отметить, что это была одной из самых сложных частей, гайдов нигде не было, не понятно было как подключаться в первый раз.

## II - соединение
Осталось только соединить `Mikrotik` и `OVPN сервер`. Для этого пороемся в настройках OVPN сервера, через уже установленый граф. интерфейс. Для начала отключена функция tls-auth, она не поддерживается Mikrotik'ом.
![Рисунок7]()
По тому же принципу был сделан выбор на `протокол tcp`.
![Рисунок8]()
Далее был создан отдельный профиль для меня, в нем был создан профиль для клиента. 
![Рисунок9]()
Это файл был передан на микротик, из него сгенерированы сертификаты и получен ключ.
![Рисунок10]()
Ну и наконец таки создан `OVPN интерфейс`, через которые и создается тунель к серверу.
> Заметка: вначале не получалось установить подключение, в итоге оказалось, что надо задать пароль новому пользователю и после этого обновить конфигурацию

![Рисунок11]()
Последним действием я проверю работоспособность моего тунеля.
![Рисунок12]()

## III - результаты
1) Через графический интерфейс настроен `OVPN сервер`;
2) Локально через VirtualBox поднят `Mikrotik CHR`;
3) Создан туннель между ними.